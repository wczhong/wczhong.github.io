I"Ù<blockquote>
  <p><a href="https://golang.org/pkg/sync/">library</a></p>
</blockquote>

<p>syncåŒ…æä¾›äº†åŸºæœ¬çš„åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”ï¼ˆmutexï¼‰ã€‚é€šå¸¸åº•å±‚åº“çš„å¹¶å‘å¤šé‡‡ç”¨Onceæˆ–WaitGroupã€‚é«˜å±‚çš„ï¼ˆä¸šåŠ¡å±‚ï¼‰åŒæ­¥æ›´å¥½çš„æ˜¯é€šè¿‡channelå’Œcommunicationæ¥å®Œæˆã€‚</p>

<p>è¯¥ç±»åŒ…ä¸­çš„å€¼ï¼Œä¸åº”è¯¥è¢«å¤åˆ¶</p>

<blockquote>
  <p>PSï¼šå¹¶å‘æ§åˆ¶éœ€è¦ä½¿ç”¨åŒä¸€å˜é‡æ¥æ§åˆ¶ï¼Œåº”è¯¥é€šè¿‡å¼•ç”¨å’ŒæŒ‡é’ˆçš„å½¢å¼ä¼ é€’ã€‚</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre></td><td class="rouge-code"><pre>package main

import (
	"fmt"
	"sync"
)

func main() {
  // if once.Do(f) is called multiple times, only the first call will invoke f,
  // even if f has a different value in each invocation. A new instance of
  // Once is required for each function to execute.
	var once sync.Once
	onceBody := func() {
		fmt.Println("Only once")
	}
	done := make(chan bool)
	for i := 0; i &lt; 10; i++ {
		go func() {
			once.Do(onceBody)
			done &lt;- true
		}()
	}
	for i := 0; i &lt; 10; i++ {
		&lt;-done
	}
}
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>once å˜é‡ç»‘å®šçš„å‡½æ•°è™½ç„¶è¢«è°ƒç”¨å¤šæ¬¡ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡çš„è°ƒç”¨ä¼šè¢«æ‰§è¡Œ</li>
  <li>once è¢«æ‰§è¡Œåï¼Œå³ä½¿æ›´æ¢äº†å‡½æ•°ï¼Œ æ–°æ›´æ¢çš„å‡½æ•°ä¹Ÿä¸ä¼šè¢«æ‰§è¡Œ</li>
  <li>å¦‚æœéœ€è¦å¤šä¸ªå‡½æ•°éƒ½è¢«åªå”¤é†’ä¸€æ¬¡ï¼Œå°±è¦ä¸ºæ¯ä¸ªå‡½æ•°é…å¤‡ä¸€ä¸ªsync.Onceå˜é‡</li>
  <li>coin the term <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a></li>
</ul>
:ET